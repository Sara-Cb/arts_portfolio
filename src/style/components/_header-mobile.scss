@use "../partials/variables" as *;
@use "../partials/mixins" as *;
@use "../partials/colors" as *;

header {
  .contentContainer {
    @include flexRowSpaceBetween;
    gap: 1rem;
  }

  .logo,
  .navMenu,
  .playerMenu {
    @include flexCenter;
  }

  .logo,
  .playerMenu {
    @include dimensions(2rem, 2rem);
  }

  .navMenu {
    @include dimensions(100%, 2rem);

    ul {
      @include fullDimensions;
      @include flexRow;
      gap: 2rem;

      .navLink {
        @include relative;
        color: $cool;
        transition: all 0.3s ease;

        &:hover {
          color: $ghost;
        }

        &.active {
          color: $ghost;
          filter: drop-shadow(0 0 8px $madder);
        }

        .label {
          @include absolute(0, 3rem, 0, 0);
        }
      }
    }
  }

  .playerMenu {
    gap: 1rem;

    .volume-icon-btn {
      background: transparent;
      border: none;
      padding: 0;
      cursor: pointer;
      color: inherit;
      display: flex;
      align-items: center;
      justify-content: center;

      &:focus-visible {
        outline: 2px solid $cool;
        outline-offset: 2px;
        border-radius: 4px;
      }
    }

    .playerIcon {
      background: transparent;
      border: none;
      padding: 0;
      cursor: pointer;
      color: inherit;
      display: flex;
      align-items: center;
      justify-content: center;

      &:focus-visible {
        outline: 2px solid $cool;
        outline-offset: 2px;
        border-radius: 4px;
      }
    }

    svg {
      cursor: pointer;
    }
  }
}

.player {
  background-color: $night;
  animation: playerSlideIn 0.3s ease-out;
  will-change: transform, opacity;
  z-index: 300;
  @include absolute($header-size, 0, 0, 0);
  @include flexColumnTop;
  @include fullPage;
}

@keyframes playerSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.player {
  .video {
    @include absolute;
    @include fullDimensions;
    overflow: hidden;
    z-index: 0;
    opacity: 0;
    transition: opacity 0.6s ease-in;
    will-change: opacity;

    &.loaded {
      opacity: 1;
    }

    .video-bg {
      @include fullDimensions;
      object-fit: cover;
      object-position: center;
      pointer-events: none;
      will-change: transform;
      transform: translateZ(0);
      backface-visibility: hidden;
    }
  }

  .content {
    @include fullDimensions;
    @include flexColumn;
    gap: 1rem;
    padding-bottom: 5rem;
    background-color: rgba(18, 18, 18, 0.65);
    backdrop-filter: blur(2px);
    position: relative;
    z-index: 1;
  }

  .current {
    @include dimensions(100%, auto);
    @include flexColumn;
    gap: 2rem;
    padding: 1rem;

    .waves {
      @include flexRow;
      @include dimensions(100%, 4rem);
      gap: 0.6rem;
      cursor: pointer;

      .wave {
        width: 0.2rem;
        background-color: $cool;
        border-radius: 5px;
        opacity: 0.8;
        animation: wavePulse 1.2s ease-in-out infinite;
        animation-play-state: running;
      }

      .wave:nth-child(1) {
        height: 40%;
        animation-delay: 0s;
      }

      .wave:nth-child(2) {
        height: 60%;
        animation-delay: 0.2s;
      }

      .wave:nth-child(3) {
        height: 100%;
        animation-delay: 0.4s;
      }

      .wave:nth-child(4) {
        height: 60%;
        animation-delay: 0.6s;
      }

      .wave:nth-child(5) {
        height: 40%;
        animation-delay: 0.8s;
      }
    }

    .waves.paused {
      .wave {
        animation-play-state: paused;
      }
    }

    @keyframes wavePulse {
      0%,
      100% {
        transform: scaleY(1);
      }

      50% {
        transform: scaleY(0.2);
      }
    }

    .title {
      font-size: 1.5rem;
      text-align: center;
      color: $ghost;
      padding: 0.5rem 0;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
      @include border("bottom");
      border-image: linear-gradient(to right, transparent, $ghost, transparent)
        1;
    }

    .controls {
      @include flexRowSpaceBetween;
      gap: 1rem;
    }
  }

  .volumeController {
    @include dimensions(100%, 4rem);
    @include flexRow;
    gap: 0.6rem;
    padding-bottom: 1rem;

    svg {
      @include dimensions(1.5rem, 1.5rem);
      cursor: pointer;
    }

    .volumeBar {
      @include dimensions(50%, 100%);
      min-width: 10rem;
      @include flexCenter;

      .bar,
      .progress {
        @include dimensions(100%, 0.2rem);
      }

      .bar {
        @include relative;
        background: $cool-trans-30;
        cursor: pointer;

        &:focus-visible {
          outline: 2px solid $cool;
          outline-offset: 3px;
        }

        .progress,
        .handle {
          position: absolute;
          left: 0;
          top: 50%;
          transform: translateY(-50%);
          background: $ghost;
        }

        .handle {
          z-index: 2;
          @include dimensions(1rem, 1rem);
          border-radius: 50%;
          cursor: pointer;
          transition: transform 0.2s ease;
        }
      }

      .bar:focus-visible .handle {
        transform: translateY(-50%) scale(1.3);
      }
    }
  }

  .trackList {
    @include dimensions(100%, auto);
    @include flexColumn;
    padding: 1rem 1.5rem;
    -webkit-overflow-scrolling: touch;

    .next {
      font-size: 0.7rem;
      color: $cool;
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.8;
    }

    .list {
      width: 100%;
      height: 23dvh;
      @include flexColumn;
      gap: 1rem;
      overflow-y: auto;

      .track {
        color: $cool;
        gap: 0.6rem;
        padding: 0.5rem 0;
        @include border("bottom");
        border-image: linear-gradient(to right, transparent, $cool, transparent)
          1;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);

        &:hover,
        &:active {
          color: $ghost;
          border-image: linear-gradient(
              to right,
              transparent,
              $ghost,
              transparent
            )
            1;
          transform: translateX(4px);
        }
      }
    }
  }

  .socials {
    @include flexRow;
    @include dimensions(100%, 5rem);
    @include absolute(auto, 0, 0, 0);
    gap: 2rem;
    font-size: 0.9rem;
    padding: 0 1rem;

    a {
      transition: all 0.3s ease;

      &:hover,
      &:active {
        text-decoration: underline;
        transform: translateY(-2px);
      }
    }

    .spotify:hover,
    .spotify:active {
      color: #1db954;
      text-decoration-color: #1db954;
    }

    .youtube:hover,
    .youtube:active {
      color: #ff0000;
      text-decoration-color: #ff0000;
    }
  }
}
